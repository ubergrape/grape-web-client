// eslint-disable-next-line import/no-extraneous-dependencies
const glob = require('glob')
const { basename } = require('path')
const camelCase = require('lodash/camelCase')
const { writeFileSync } = require('fs')

const basePath = `${process.cwd()}/src/svg-icons`
const target = `${basePath}/raw.js`

const exports = glob.sync(`${basePath}/svg/*.svg`).map(filePath => {
  const fileName = basename(filePath, '.svg')
  return `export ${camelCase(fileName)} from './svg/${fileName}.svg'`
})

const data = `${[
  `/* Auto generated by ${__filename.replace(process.cwd(), '')} */`,
]
  .concat(exports)
  .join('\n')}\n`

writeFileSync(target, data)
// eslint-disable-next-line no-console
console.log(`Generated svg icons exports in "${target}"`)
