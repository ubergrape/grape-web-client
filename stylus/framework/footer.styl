// ****
//
// Footer with Textarea
//
// ****
.footer
	background: footer-background
	padding: 10px 30px 25px 20px
	z-index: 30
	transform: translate3d(0,0,0)
	will-change: transform

	.grape-input-wrapper
		flex: 1
		display: flex
		position: relative

		&.disabled
			.hint-box, .info-markdown, .uploader
				display: none
		&.focus
			.input-highlighter
				border-color: gainsboro-light
		[contenteditable="true"]
			padding: 0 10px
			min-height: 21px // prevent jumping when emoji inserted
			&:before
				color: gainsboro-dark
				opacity: .5
				pointer-events: none // prevent cursor change on placeholder
		.image
			float: none
			margin-right: (horizontal-space / 2)
			border-radius: 50%
			position: relative
			&::after
				content: ""
				position: absolute
				right: 0
				top: 14px
				border-right: 6px solid white
				border-top: 6px solid transparent
				border-bottom: 6px solid transparent

	.input-highlighter
		flex: 1
		display: flex
		border: 1px solid silver-dark
		border-radius: main-border-radius

	.grape-input
		flex: 1
		display: flex
		align-items: center
		cursor: text

	.edit-message, .hint-box
		@extend $small-font-size
		position: absolute
		left: 46px
		bottom: -18px
		color: gainsboro-dark
		opacity: .8
		span
			background: silver-light
			border-radius: main-border-radius
			border: 1px solid gainsboro-light
			padding: 0 2px

	// input helper icons on right
	.input-helpers
		flex-shrink: 0
		display: flex
		align-items: flex-end
		padding-bottom: 7px
		padding-right: 4px
		.input-emoji,
		.uploader,
		.info-markdown
			@extend $hoverable
			padding: 0 8px
			color: gainsboro-dark
			font-size: 20px
			opacity: .5
			transition: transform .2s ease-in-out, opacity .1s ease-out
			&:hover
				opacity: .8

	// uploader styling
	.uploader
		position: relative
		input
			display: none

	.upload-progress
		display: none
		position: absolute
		text-align: center
		top: 0
		left: 0
		bottom: 0
		right: 0
		background: white
		border-radius: main-border-radius
		overflow: hidden
		img.preview
			display: none // hide image for now
			max-width: upload-size
			max-height: upload-size
			vertical-align: middle
		.progress
			position: absolute
			top: 0
			left: 0
			bottom: 0
			right: 0
			background: rgba(255, 255, 255, 0.6)
		.progress canvas
			display: inline-block
			vertical-align: bottom

	.uploader.open .upload-progress
		display: block

	.editing-previous
		.input-highlighter
			background: lighten(gold, 80%)
		.input-helpers-item
			cursor: default
		.uploader,
		.input-emoji
			transform: scale(0)
			opacity: 0
			pointer-events: none
		.hint-box
			display: none
	// Toggle for edit message input
	.grape-input-wrapper .edit-message
		display:none
	.grape-input-wrapper.editing-previous .edit-message
		display: block
