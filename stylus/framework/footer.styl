// ****
//
// Footer with Textarea
//
// ****
.footer
	z-index: 30
	padding: 0px horizontal-space 20px
	background: white
	background-attachment: fixed
	transform: translate3d(0,0,0)
	will-change: transform

	.grape-input-wrapper
		&.hidden
			display: none
		display: flex
		position: relative
		&.disabled
			.hint-box, .uploader
				opacity: 0
		.avatar
			display: none;
			padding-left: (horizontal-space / 2)
			position: relative
			&::after,
			&::before // Hack for the arrow of the message box
				content: ""
				position: absolute
				z-index: 5
			&::after
				left: -2px;
				right: auto;
				top: 1px;
				border-left: 9px solid white
				border-right: none
				border-bottom: 13px solid transparent
			&::before // Hack for the arrow of the message box
				border-left: 10px solid #E5E5E5
				border-right: none
				border-bottom: 14px solid transparent
				left: -1px;
				right: auto;
				top: 0px;
			.image
				width: 42px
				height: 42px
				border-radius: 50%
				position: relative
				vertical-align: bottom

	.controls-wrapper
		flex: 1
		position: relative
		display: flex
		border: 1px solid #d3d3d3
		border-radius: 100px
		background-color: #fff
		box-shadow: 0px 1px 1px 0px rgba(100, 100, 100, 0.05);

	grape-input
		flex: 1
		[contenteditable="true"]
			@extend $proximaNova
			@extend $big-font-size
			position: relative
			padding: 9px 92px 7px 15px
			&::before
				position: absolute
				pointer-events: none // prevent cursor change

	.search-browser-button,
	.controls-group
		padding: 9px
		display: flex
		justify-content: center
		align-items: flex-end

	.search-browser-button
		@extend $hoverable
		font-size: bigger-font-size
		color: white
		border-radius: 34px
		width: 36px
		height: 36px
		padding: 6px 0
		text-align: center
		cursor: pointer
		background: #7B477B
		margin: 4px
		&:hover
			opacity: 1
			background-color: #8E518E

	.controls-group
		position: absolute
		bottom: 0
		right: 0
		.emoji-browser-button,
		.uploader
			@extend $hoverable
			padding: 0 6px
			color: gainsboro-dark
			font-size: 20px
			opacity: .5
			transition: transform .2s ease-in-out, opacity .1s ease-out
			&:hover
				opacity: .8
				transition: none

	.edit-message,
	.js-markdown-tips
		color: #666666
		font-size: 0.8em

	// hints
	.edit-message, .hint-box
		position: absolute
		top: 0px
		left: 64px
		background: linear-gradient(#FBFBFB, #F7F7F7);
		border: solid 1px #E5E5E5
		border-radius: 3px
		padding: 2px 12px 1px 12px
		-webkit-transition: opacity 0.2s, -webkit-transform 0.2s
		transition: opacity 0.2s, transform 0.2s
		transition-timing-function: ease-out
		transform: translateY(-20px)
		opacity: 1
		span
			border-radius: 3px
			border: 1px solid #CCCCCC
			padding: 1px 3px
			margin: 0 2px
			color: #666666
			background: #FBFBFB

	.js-markdown-tips
		position: absolute
		bottom: -22px
		right: 4px
		cursor: pointer
		span
			text-decoration: underline

	// uploader styling
	.uploader
		position: relative
		input
			display: none

	.upload-progress
		display: none
		position: absolute
		text-align: center
		top: 0
		left: 0
		bottom: 0
		right: 0
		background: white
		border-radius: main-border-radius
		overflow: hidden
		img.preview
			display: none // hide image for now
			max-width: upload-size
			max-height: upload-size
			vertical-align: middle
		.progress
			position: absolute
			top: 0
			left: 0
			bottom: 0
			right: 0
			background: rgba(255, 255, 255, 0.6)
		.progress canvas
			display: inline-block
			vertical-align: bottom

	.uploader.open .upload-progress
		display: block

	.editing-previous
		.controls-wrapper
			background: lighten(gold, 80%)
		.controls-group-item
			cursor: default
		.uploader
			transform: scale(0)
			opacity: 0
		.hint-box
			opacity: 0
		.avatar
			&::after
				border-left-color: lighten(gold, 80%)
	// Toggle for edit message input
	.grape-input-wrapper .edit-message
		opacity: 0
		transform: translateY(-20px)
	.grape-input-wrapper.editing-previous .edit-message
		opacity: 1
		transform: translateY(-35px)
