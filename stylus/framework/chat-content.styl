// ****
//
// Mid-Section with Room Header, History and Footer
//
// ****

.client-body
	height: 100%
	padding-top: header-height
	padding-bottom: footer-height + 12
	position: relative
	overflow: hidden
	.chat-wrapper // The scrollable history area
		position: relative
		background: chat-background
		overflow: auto
		height: 100%
		padding: 0
		z-index: 10
		&:after
			content: ""
			position: absolute
			top: -1px
			left: 3px
			right: 3px
			height: 1px
			box-shadow: 0 -2px 7px rgba(0, 0, 0, 1)
	.chat
		height: 100%
		position: relative
		padding: 20px 0
	a // Different styling for links within history
		color: link-color
		@extend $subtle-link
		&:hover
			color: lighten(link-color, 15%)


// ****
//
// Welcome messages inside of the history
//
// ****

.welcome-message
	margin: 0
	padding: 30px 40px 42px 20px
	@media (max-width: 720px)
		text-align: center
	body.notifications-disabled &
		padding-top: 62px !important
	.image
		float: left
		@media (max-width: 720px)
			float: none
	> div
		overflow: hidden
		padding-left: 20px
		@media (max-width: 720px)
			padding-left: 0
	h2, h3, p, ul
		max-width: 720px
		margin-bottom: 2px
	h2
		@extend $bigger-font-size
		color: gainsboro-dark
		margin-bottom: 4px
	h3
		@extend $big-font-size
		font-weight: bold
		color: darken(gainsboro-dark, 20%)
		margin-bottom: 3px
	.welcome-tasks
		margin-top: 20px
		@extend $clearfix
		.task-description
			font-weight: bold
			color: gainsboro-dark
			margin-bottom: 2px
		li
			i
				margin-right: 4px
		.option
			padding-top: 5px
			@media (min-width: 721px)
				float: left
				margin: 0 22px 10px 0
		.invite-to-room
			@extend $clearfix
			.input-invite
				width: 70%
				height: 38px
				padding: 9px 12px 8px 12px
				outline: none
				box-sizing: border-box
				float: left
				margin-right: 8px
			.btn-invite
				max-width: 200px
				text-overflow: ellipsis
				height: 34px
		.autocomplete-wrapper
			margin: 0
			top: 4px
			width: 70%
			.autocomplete
				@extend $clearfix
				top: 0px

// ****
//
// Everything regarding chat messages
//
// ****
			
.message-group
	@extend $clearfix
	margin: 10px 30px 20px 20px
	position: relative
	.avatar
		float: left
		position: relative
		font-weight: bold
		.image
			width: 36px
			float: left
			margin-right: (horizontal-space / 2)
			border-radius: 50%
		&::after // Hack for the arrow of the message box
			content: ""
			position: absolute
			right: 0
			top: 12px
			color: chat-content
			border-right: 6px solid currentColor
			border-top: 6px solid transparent
			border-bottom: 6px solid transparent

	&.deleted //When a user was removed from the organization, #867
		color: gainsboro-dark
		.message-author
			color: gainsboro-dark
		.time
			color: gainsboro-dark
	&:last-child
		margin-bottom: 10px

.message-author // The message author text style, used to display Firstname, Lastname and Username in brackets // IMPORTANT: It's about the CLASS, not the TAG.
	font-weight: bold
	margin-bottom: 3px
	display: inline-block
//When a user was removed from the organization, #867
span.author-deleted
	@extend $small-font-size
	font-weight: bold
	text-transform: uppercase
	margin-left: 4px


.message-content // The message bubble with all the content
	padding: 8px 10px 5px
	overflow: hidden
	background: chat-content
	border-radius: main-border-radius
	.time
		float: right
		font-size: small-font-size
		color: gainsboro-dark
		.dif-tz,
		.user-tz
			display: none
		.dif-tz
			font-weight: bold
	> .time
		opacity: 1
	&:hover
		.dif-tz,
		.user-tz
			display: inline
	.message
		margin-bottom: 3px
		// overflow: hidden Commented out - because dunno why we need that atm
		.time,
		.edit,
		.btn-label
			opacity: 0
			// transition: opacity 200ms ease
		&:hover
			> .time
			> .edit
			> .btn-label
				opacity: 1
		.edit,
		.btn-label
			@extend $hoverable
			display: inline-block
			vertical-align: top
			color: gainsboro-light
			i
				margin-left: 6px
				margin-left: 4px
				&:hover
					color: gainsboro-dark
				&:active
					color: darken(gainsboro-dark, 25%)
			.btn-delete
				&:hover
					color: bittersweet-dark
				&:active
					color: darken(bittersweet-dark, 25%)
		.status-control
			float: right
			margin-left: 8px
			min-width: 80px
			text-align: right
			.unsent
				color: bittersweet-dark
				.status-label
					color: bittersweet-light
			.resend
				display: none
				color: aqua-dark
				cursor: pointer
			.pending
				color: gainsboro-light
				// cursor: progress
			i
				margin-left: 6px
				pointer-events: none
			.status-label
				// @extend $small-font-size
				// text-transform: uppercase
				font-weight: bold
				pointer-events: none
		&.pending,
		&.unsent
			.text
				opacity: 0.4
		&.unsent
			.status-control
				&:hover
					.resend
						display: block
					.unsent
						display: none
		&.editing
			background: lighten(gold, 80%)
		&.removing
			background: lighten(gold, 60%)
		&.removed
			background: lighten(bittersweet-light, 60%)
		a.attachment
			white-space: nowrap
			border-bottom: 1px solid link-color
			display: inline-block
			margin: 1px
			padding: 1px 0
			vertical-align: baseline
			font-weight: bold
			&:hover
				color: lighten(link-color, 25%)
				text-decoration: none
				border-color: aqua-dark !important
			&:before
				font-weight: normal
				content: "\f016"
				font-family: FontAwesome
				margin-right: 6px
			&[href$=".pdf"]
				&:before
					content: "\f1c1"
			&[href$=".zip"],
			&[href$=".rar"],
			&[href$=".7z"],
			&[href$=".gzip"]
				&:before
					content: "\f1c6"
			&[href$=".mp3"],
			&[href$=".wav"],
			&[href$=".wma"]
				&:before
					content: "\f1c7"
			&[href$=".xls"],
			&[href$=".xlsx"],
			&[href$=".csv"]
				&:before
					content: "\f1c3"
			&[href$=".doc"],
			&[href$=".docx"],
			&[href$=".rtf"]
				&:before
					content: "\f1c2"
			&[href$=".ppt"],
			&[href$=".pptx"]
				&:before
					content: "\f1c4"
			&[href$=".png"],
			&[href$=".jpg"],
			&[href$=".jpeg"],
			&[href$=".bmp"],
			&[href$=".tif"],
			&[href$=".tiff"]
				&:before
					content: "\f1c5"
			&[href$=".wmv"],
			&[href$=".avi"],
			&[href$=".mpg"],
			&[href$=".mpeg"],
			&[href$=".mov"],
			&[href$=".mp4"]
				&:before
					content: "\f1c8"
		.img-atm
			display: inline-block
		.image-wrap
			display: inline-block
			border-left: 2px solid silver-light
			padding-left: 5px
			line-height: 1px
			max-height: 480px
			overflow: hidden
			img
				max-width: 100%


// ****
//
// Styling for Typing Notifications #1587
//
// ****

.typing-notification
	@extend $small-font-size
	margin: 0 30px 0px 66px
	color: gainsboro-dark
	min-height: 11px
	i.fa
		margin-left: 1px
	.dotOne
		opacity: 0
		-webkit-animation: dot 1.3s infinite
		-webkit-animation-delay: 0.0s
		animation: dot 1.3s infinite
		animation-delay: 0.0s
	.dotTwo
		opacity: 0
		-webkit-animation: dot 1.3s infinite
		-webkit-animation-delay: 0.2s
		animation: dot 1.3s infinite
		animation-delay: 0.2s
	.dotThree
		opacity: 0
		-webkit-animation: dot 1.3s infinite
		-webkit-animation-delay: 0.3s
		animation: dot 1.3s infinite
		animation-delay: 0.3s

@-webkit-keyframes dot {
      0% { opacity: 0; }
     50% { opacity: 0; }
    100% { opacity: 1; }
}

@keyframes dot {
      0% { opacity: 0; }
     50% { opacity: 0; }
    100% { opacity: 1; }
}

// ****
//
// Styling for markdown text within a message
//
// ****

.text
	display: inline-block
	padding: 0
	margin-bottom: 3px
	max-width: 90%
	word-wrap: break-word
	transition: opacity .2s linear
	em
		font-style: italic
	ul,
	ol
		padding-left: 18px
	ul
		list-style: disc outside none
	ol
		list-style: decimal outside none
	blockquote
		border-left: 3px solid gainsboro-light
		margin: 4px 0
		padding: 0.5em 10px
		font-style: italic
		color: gainsboro-dark
	pre 
		overflow: hidden
	code
		border: 1px solid gainsboro-light
		border-radius: main-border-radius
		background: white
		padding: 0 4px
		display: inline-block
		margin-bottom: -1px
		white-space: pre-wrap; /* CSS3 */
		white-space: -moz-pre-wrap; /* Mozilla, post millennium */
		white-space: -pre-wrap; /* Opera 4-6 */
		white-space: -o-pre-wrap; /* Opera 7 */
		word-wrap: break-word; /* Internet Explorer 5.5+ */
	.warning-unsent
		color: gainsboro-light
		&:before
			content: "\f071"
			font-family: FontAwesome
			color: gold
			margin-right: 6px
	p
		margin-bottom: 8px
		&:last-of-type
			margin-bottom: 0
		.markdown-img-wrapper
			text-align: center
			vertical-align: middle
			display: table-cell
			height: 250px
			width: 400px
			border: 1px solid #eeecef
			border-radius: main-border-radius
			img
				max-width: 350px
				max-height: 200px

.googledrive
	.text
		p
			.markdown-img-wrapper
				text-align: inherit
				vertical-align: inherit
				display: inherit
				height: inherit
				width: inherit
				border: inherit
				border-radius: inherit
				img
					max-width: inherit
					max-height: inherit
			
// ****
//
// Separators, used to split content within the history
//
// ****
.date-separator,
.newmessage-separator
	text-align: center
	color: gainsboro-dark
	@extend $small-font-size

.date-separator
	margin: 0 30px 0 20px
	padding:  5px 0 0 0

.newmessage-separator
	border-bottom: 1px solid grape-dark
	height: 7px
	margin: 0px 30px 18px 20px
	span
		color: grape-dark
		background: chat-background
		padding: 0px 5px
