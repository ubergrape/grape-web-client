// ****
//
// Mid-Section with Room Header, History and Footer
//
// ****

.client-body
	display: flex
	flex-direction: column
	height: 100vh
	margin-left: client-navigation-width
	min-width: client-body-minwidth
	position: relative
	overflow: hidden
	transition: width 400ms ease
	.chat-wrapper // The scrollable history area
		flex: 1
		display: flex
		flex-direction: column
		position: relative
		background: chat-background
		overflow: auto
		padding: 0
		z-index: 10
	.chat
		flex: 1
		position: relative
		padding: 20px 0
	a // Different styling for links within history
		color: link-color
		@extend $subtle-link
		&:hover
			color: lighten(link-color, 15%)

// ****
//
// Welcome messages inside of the history
//
// ****

.welcome-message
	margin: 0
	padding: 30px 40px 42px 20px
	@media (max-width: 720px)
		text-align: center
	body.notifications-disabled &
		padding-top: 62px !important
	@extend $big-font-size
	.image
		float: left
		@media (max-width: 720px)
			float: none
	> div
		overflow: hidden
		padding-left: 20px
		@media (max-width: 720px)
			padding-left: 0
	h2, h3, p, ul
		max-width: 720px
		margin-bottom: 2px
	h2
		@extend $bigger-font-size
		color: gainsboro-dark
		margin-bottom: 4px
	h3
		@extend $bigger-font-size
		font-weight: bold
		color: darken(gainsboro-dark, 20%)
		margin-bottom: 3px
	.welcome-tasks
		margin-top: 20px
		@extend $clearfix
		.task-description
			font-weight: bold
			color: gainsboro-dark
			margin-bottom: 2px
		li
			i
				margin-right: 4px
		.option
			padding-top: 5px
			@media (min-width: 721px)
				float: left
				margin: 0 22px 10px 0
		.invite-to-room
			@extend $clearfix
			.input-invite
				width: 70%
				height: 38px
				padding: 9px 12px 8px 12px
				outline: none
				box-sizing: border-box
				float: left
				margin-right: 8px
			.btn-invite
				max-width: 200px
				text-overflow: ellipsis
				height: 34px
		.autocomplete-wrapper
			margin: 0
			top: 4px
			width: 70%
			.autocomplete
				@extend $clearfix
				top: 0px

// ****
//
// Everything regarding chat messages
//
// ****

.message-group
	@extend $clearfix
	margin: 10px 30px 20px 20px
	position: relative
	.avatar
		float: left
		position: relative
		font-weight: bold
		.image
			width: 42px
			height: 42px
			float: left
			margin-right: (horizontal-space / 2)
			border-radius: 50%
	.message-inner-wrap
		display: inline-block
		padding: 0
		border-radius: 3px
		@extend $big-font-size
		position: relative
		max-width: 100%
	&.user
		.avatar
			&::after,
			&::before // Hack for the arrow of the message box
				content: ""
				position: absolute
			&::after
				z-index: 9
				right: -2px
				top: 1px
				border-right: 9px solid white
				border-bottom: 13px solid transparent
			&::before // Hack for the arrow of the message box
				border-right: 10px solid #E0DFDF
				border-bottom: 14px solid transparent
				right: -1px;
				top: 0px;
		.message-inner-wrap
			border: 1px solid #E0DFDF
			background-color: #fff
		.text.main
			max-width: 600px

	&.service
		.message-content
			border-left: 2px solid link-color
			max-width: 740px
		.message
			padding: 10px 16px 9px

	&.deleted //When a user was removed from the organization, #867
		color: gainsboro-dark
		.message-author
			color: gainsboro-dark
		.time
			color: gainsboro-dark
	&:last-child
		margin-bottom: 10px
.message-group.creator.user
	margin-left: 30px
	.avatar
		.image
			display: none
		&::after
			border-right-color: blue-lighter
		&::before // Hack for the arrow of the message box
			border-right-color: blue-light
	.message-inner-wrap
		border-color: blue-light
		background: blue-lighter
	.message
		border-color: #DBE7ED
	.message-author,
	.message-author:hover
		color: grape-typo-hl
		text-decoration: none
	@media (max-width: 850px)
		.avatar
			float: right
			.image
				margin-left: (horizontal-space / 2)
				margin-right: 0
				display: none
			&::after
				left: -1px
				right: auto
				top: 1px
				border-left: 9px solid blue-lighter
				border-right: none
				border-bottom: 13px solid transparent
			&::before // Hack for the arrow of the message box
				border-left: 10px solid blue-light
				border-right: none
				border-bottom: 14px solid transparent
				left: 0
				right: auto
				top: 0px
		.message-content
			text-align: right
			padding-right: 0
			padding-left: 68px
		.message-inner-wrap
			text-align: left
			max-width: 100%
.messageinfo
	color: #b3b3b3
	text-align: left
	margin-bottom: 8px
	@extend $normal-font-size
	span
		color: #b3b3b3
	.message-author
		display: inline
		@extend $subtle-link
		color: grape-typo-hl
		font-weight: bold
	.time
		display: inline
		.dif-tz,
		.user-tz
			opacity: 0
.message-content
	overflow: hidden
	&:hover
		.dif-tz,
		.user-tz
			opacity: 1
	.message
		clear: both
		padding: 10px 30px 10px 16px
		border-top: 1px solid silver-grey
		position: relative
		&.freshmessage
			animation: hifromthebottomNoShadow 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94)
		&.first
			margin-top: 0
			border-top: 1px
		&:hover
			> .edit
				opacity: 1
		.edit,
		.btn-label
			opacity: 0
		.edit,
		.btn-label
			@extend $hoverable
			display: inline-block
			vertical-align: top
			color: blue-light
			position: absolute
			right: 0
			top: 0
			width: 20px
			i
				margin-right: 4px
				&:hover
					color: gainsboro-dark
				&:active
					color: darken(gainsboro-dark, 25%)
			.btn-delete
				&:hover
					color: bittersweet-dark
				&:active
					color: darken(bittersweet-dark, 25%)
		.status-control
			float: right
			margin-left: 8px
			min-width: 80px
			text-align: right
			.unsent
				color: bittersweet-dark
				.status-label
					color: bittersweet-light
			.resend
				display: none
				color: aqua-dark
				cursor: pointer
			.pending
				color: gainsboro-light
			i
				margin-left: 6px
				pointer-events: none
			.status-label
				font-weight: bold
				pointer-events: none
		&.pending,
		&.unsent
			.text
				opacity: 0.4
		&.unsent
			.status-control
				&:hover
					.resend
						display: block
					.unsent
						display: none
		&.editing
			background: lighten(gold, 80%)
			color: grape-typo
			z-index: 10
			position: relative
			.message-author
				color: gainsboro-dark
			~ .avatar
				&::after
					border-color: lighten(gold, 80%)
		&.removing
			background: lighten(gold, 60%)
			color: grape-typo
			z-index: 10
			position: relative
			~ .avatar
				&::after
					border-color: lighten(gold, 80%)
		&.removed
			background: lighten(bittersweet-light, 60%)
			color: grape-typo
			z-index: 10
			position: relative
			~ .avatar
				&::after
					border-color: lighten(bittersweet-light, 60%)
		a.attachment	
			display: inline		
			border-bottom: 1px solid link-color
			margin: 1px
			padding: 1px 0
			vertical-align: baseline
			&:hover
				color: lighten(link-color, 25%)
				text-decoration: none
				border-color: aqua-dark !important
			&:before
				font-weight: normal
				content: "\f016"
				font-family: FontAwesome
				margin-right: 6px
			&[href$=".pdf"]
				&:before
					content: "\f1c1"
			&[href$=".zip"],
			&[href$=".rar"],
			&[href$=".7z"],
			&[href$=".gzip"]
				&:before
					content: "\f1c6"
			&[href$=".mp3"],
			&[href$=".wav"],
			&[href$=".wma"]
				&:before
					content: "\f1c7"
			&[href$=".xls"],
			&[href$=".xlsx"],
			&[href$=".csv"]
				&:before
					content: "\f1c3"
			&[href$=".doc"],
			&[href$=".docx"],
			&[href$=".rtf"]
				&:before
					content: "\f1c2"
			&[href$=".ppt"],
			&[href$=".pptx"]
				&:before
					content: "\f1c4"
			&[href$=".png"],
			&[href$=".jpg"],
			&[href$=".jpeg"],
			&[href$=".bmp"],
			&[href$=".tif"],
			&[href$=".tiff"]
				&:before
					content: "\f1c5"
			&[href$=".wmv"],
			&[href$=".avi"],
			&[href$=".mpg"],
			&[href$=".mpeg"],
			&[href$=".mov"],
			&[href$=".mp4"]
				&:before
					content: "\f1c8"
		.img-atm
			display: inline-block
		.image-wrap
			display: inline-block
			line-height: 1px
			max-height: 480px
			overflow: hidden
			img
				max-width: 100%

//When a user was removed from the organization, #867
span.author-deleted
	@extend $small-font-size
	font-weight: bold
	text-transform: uppercase
	margin-left: 4px




// ****
//
// Styling for Typing Notifications #1587
//
// ****

.typing-notification
	@extend $small-font-size
	margin: 0 30px 0px 66px
	color: gainsboro-dark
	min-height: 11px
	text-align: center
	i.fa
		margin-left: 1px
	.dotOne
		opacity: 0
		-webkit-animation: dot 1.3s infinite
		-webkit-animation-delay: 0.0s
		animation: dot 1.3s infinite
		animation-delay: 0.0s
	.dotTwo
		opacity: 0
		-webkit-animation: dot 1.3s infinite
		-webkit-animation-delay: 0.2s
		animation: dot 1.3s infinite
		animation-delay: 0.2s
	.dotThree
		opacity: 0
		-webkit-animation: dot 1.3s infinite
		-webkit-animation-delay: 0.3s
		animation: dot 1.3s infinite
		animation-delay: 0.3s

@-webkit-keyframes dot {
      0% { opacity: 0; }
     50% { opacity: 0; }
    100% { opacity: 1; }
}

@keyframes dot {
      0% { opacity: 0; }
     50% { opacity: 0; }
    100% { opacity: 1; }
}

// ****
//
// Styling for markdown text within a message
//
// ****

.text
	padding: 0
	margin-bottom: 1px
	max-width: 85%
	word-wrap: break-word
	transition: opacity .2s linear
	em
		font-style: italic
	ul,
	ol
		padding-left: 18px
	ul
		list-style: disc outside none
	ol
		list-style: decimal outside none
	blockquote
		border-left: 3px solid gainsboro-light
		margin: 4px 0
		padding: 0.5em 10px
		font-style: italic
		color: gainsboro-dark
	pre
		overflow: hidden
		color: grape-typo
	code
		border: 1px solid gainsboro-light
		border-radius: main-border-radius
		background: white
		padding: 0 4px
		display: inline-block
		margin-bottom: -1px
		white-space: pre-wrap; /* CSS3 */
		white-space: -moz-pre-wrap; /* Mozilla, post millennium */
		white-space: -pre-wrap; /* Opera 4-6 */
		white-space: -o-pre-wrap; /* Opera 7 */
		word-wrap: break-word; /* Internet Explorer 5.5+ */
		color: grape-typo
	.warning-unsent
		color: gainsboro-light
		&:before
			content: "\f071"
			font-family: FontAwesome
			color: gold
			margin-right: 6px
	p
		margin-bottom: 8px
		&:last-of-type
			margin-bottom: 0
		.markdown-img-wrapper
			text-align: center
			vertical-align: middle
			display: table-cell
			height: 250px
			width: 400px
			border: 1px solid #eeecef
			border-radius: main-border-radius
			img
				max-width: 350px
				max-height: 200px

.googledrive
	.text
		p
			.markdown-img-wrapper
				text-align: inherit
				vertical-align: inherit
				display: inherit
				height: inherit
				width: inherit
				border: inherit
				border-radius: inherit
				img
					max-width: inherit
					max-height: inherit

// ****
//
// Separators, used to split content within the history
//
// ****
.date-separator,
.newmessage-separator
	text-align: center
	color: gainsboro-dark
	position: relative
	span
		color: grape-dark
		background: chat-background
		padding: 4px 16px
		position: relative
		z-index: 5
		border: 2px solid grass-light
		border-radius: 3px
	&::before
		content: ""
		position: absolute
		top: 50%
		left: 0
		right: 0
		background-color: #d9d9d9
		height: 1px
		margin-top: 1px

.date-separator
	margin: 0 30px 20px 20px
	padding:  5px 0 0 0
	height: 30px
	span
		color: grass-light
	&::before
		content: ""
		position: absolute
		top: 50%
		left: 0
		right: 0
		background-color: #d9d9d9
		height: 1px
		margin-top: 1px

.newmessage-separator
	height: 7px
	margin: 0px 30px 18px 20px
	span
		border-color: aqua-light
		color: aqua-light


