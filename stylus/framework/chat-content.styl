// ****
//
// Mid-Section with Room Header, History and Footer
//
// ****

.client-body
	display: flex
	flex-direction: column
	height: 100vh
	position: relative
	overflow: hidden
	margin-left: client-navigation-width
	//transition: width 400ms ease
	background: chat-background
	.chat-wrapper // The scrollable history area
		flex: 1
		display: flex
		flex-direction: column
		position: relative
		overflow: auto
		padding: 0
		z-index: 10
		background: url("../images/cgbg-new.png")
		background-attachment: scroll
	.chat
		flex: 1
		position: relative
		padding: 20px 0 0 0
		&.shrunk
			margin-right: 250px
	a // Different styling for links within history
		color: link-color
		@extend $subtle-link
		&:hover
			color: lighten(link-color, 15%)
	.main-window
		display: flex
		flex-direction: column
		flex: 1
		-webkit-transition: margin-right 0.2s, -webkit-transform 0.2s
		transition: margin-right 0.2s, transform 0.2s
		transition-timing-function: ease-out
		margin-right: 0px;
		position: relative
	.right-sidebar
		position: absolute
		top: 0
		float:right
		width: 250px
		height: calc(100% - 64px + 1px)
		right: 0
		margin-top: 63px
		background: #F2F2F2
		border-left: solid 1px #E5E5E5
		-webkit-transition: -webkit-transform 0.4s
		transition: transform 0.4s
		transition-timing-function: grape-bezier
		transform: translateX(250px)
		z-index: 50

// ****
//
// Welcome messages inside of the history
//
// ****

.welcome-message
	margin: 0
	padding: 30px 40px 42px 20px
	margin: 10px 25px 20px 52px
	@media (max-width: 720px)
		text-align: center
	body.notifications-disabled &
		padding-top: 62px !important
	@extend $big-font-size
	.image
		float: left
		@media (max-width: 720px)
			float: none
	> div
		overflow: hidden
		padding-left: 20px
		@media (max-width: 720px)
			padding-left: 0
	h2, h3, p, ul
		max-width: 720px
		margin-bottom: 2px
	h2
		@extend $bigger-font-size
		color: gainsboro-dark
		margin-bottom: 4px
	h3
		@extend $bigger-font-size
		font-weight: bold
		color: darken(gainsboro-dark, 20%)
		margin-bottom: 3px
	.alert-inline.warning
		&::after
			content: ""
	.welcome-tasks
		margin-top: 20px
		@extend $clearfix
		.task-description
			font-weight: bold
			color: gainsboro-dark
			margin-bottom: 2px
		li
			i
				margin-right: 4px
		.option
			padding-top: 5px
			@media (min-width: 721px)
				float: left
				margin: 0 22px 10px 0
		.invite-to-room
			@extend $clearfix
			.input-invite
				width: 70%
				max-width: 70%
				height: 38px
				padding: 9px 12px 8px 12px
				outline: none
				box-sizing: border-box
				float: left
				margin-right: 8px
		.autocomplete-wrapper
			margin: 0
			top: 4px
			width: 70%
			.autocomplete
				@extend $clearfix
				top: 0px
.btn-invite
	max-width: 200px
	text-overflow: ellipsis
	height: 34px
	float: right
	margin-bottom: 8px

// ****
//
// Everything regarding chat messages
//
// ****

.message-group
	@extend $clearfix
	margin: 10px 24px 20px 4%
	position: relative
	.avatar
		float: left
		position: relative
		font-weight: bold
		.image
			width: 42px
			height: 42px
			float: left
			margin-right: 12px
			border-radius: 50%
	&.user
		.avatar
			&::after,
			&::before // Hack for the arrow of the message box
				content: ""
				position: absolute
				border-left: 3px solid transparent
			&::after
				z-index: 9
				right: -2px
				top: 1px
				border-right: 9px solid white
				border-bottom: 13px solid transparent
			&::before // Hack for the arrow of the message box
				border-right: 10px solid #E5E5E5
				border-bottom: 14px solid transparent
				right: -1px;
				top: 0px;
		.text.main
			max-width: 740px

	&.deleted //When a user was removed from the organization, #867
		color: gainsboro-dark
		.message-author
			color: gainsboro-light !important
		.time
			color: #E5E5E6
	&:last-child
		margin-bottom: 10px
	&.requested
		&.user
			.avatar
				&::after
					border-right-color: rgb(207, 255, 203) !important

.message-group.creator
	.avatar
		&::after
			border-right-color: blue-lighter
			border-top-color: blue-lighter
		&::before // Hack for the arrow of the message box
			border-right-color: blue-light
			border-top-color: blue-light
	.message
		margin-right: 48px
		&:after
			border-color: #DBE7ED
	.message-author
		color: #788796
		text-decoration: none
		cursor: default
	.author-link
		cursor: default
	a.timelink
		@extend $subtle-link
		color: #788796
		&:hover
			text-decoration: none !important
	.avatar
		&.requested
			&::after
				border-right-color: rgb(207, 255, 203) !important
				border-top-color: rgb(207, 255, 203) !important
		&.editing
			&::after
				border-right-color: lighten(gold, 80%) !important
				border-top-color: lighten(gold, 80%) !important
			&::before // Hack for the arrow of the message box
				border-right-color: #DDDDDD !important
				border-top-color: #DDDDDD !important
/*
.client-style-normal .message-group.creator.user
	@media (max-width: 950px)
		.avatar
			float: right
			padding-right: 5px;
			.image
				margin-left: (horizontal-space / 2)
				margin-right: 0
				display: none
			&::after
				left: 3px
				right: auto
				top: 1px
				border-left: 9px solid blue-lighter
				border-right: none
				border-bottom: 13px solid transparent
			&::before // Hack for the arrow of the message box
				border-left: 10px solid blue-light
				border-right: none
				border-bottom: 14px solid transparent
				left: 4px
				right: auto
				top: 0px
			&.editing
				&::after
					border-left-color: lighten(gold, 80%) !important
					border-top-color: lighten(gold, 80%) !important
				&::before // Hack for the arrow of the message box
					border-left-color: #DDDDDD !important
					border-top-color: #DDDDDD !important
		&.requested
			.avatar
				&::after
					border-left-color: rgb(207, 255, 203) !important
					border-top-color: rgb(207, 255, 203) !important
		.message-content
			text-align: right
			padding-right: 0
			padding-left: 68px
		.message
			text-align: left
			&.first
				border-radius: 6px 0px 6px 6px
		.edit
			left: auto
			right: 100%
			padding-right: 7px
			padding-left: 0
*/
.messageinfo
	color: #b3b3b3
	text-align: left
	margin-bottom: 8px
	@extend $normal-font-size
	span
		color: #b3b3b3
	.message-author
		display: inline
	.author-link
		color: gainsboro-dark
	.author-link:hover
		text-decoration: none !important
		color: #7B477B
	span
		font-size: 0.9em
		margin-left: 4px
		margin-right: 4px
	a.timelink
		@extend $subtle-link
		color: gainsboro-dark
		margin-right: 12px
		font-size: 0.9em
		.fa-globe
			margin-left: 4px
		.time
			display: inline-block
			.different-timezone
				display: inline-block
				opacity: 0
				top: 0px
				left: 0px
				color: #666666
				.dif-tz
					font-size: 1.05em
		&:hover
			color: #7B477B
			text-decoration: none !important
			.different-timezone
				text-decoration: none !important
				-webkit-transition: opacity 0.2s, -webkit-transform 0.2s
				transition: opacity 0.2s, transform 0.2s
				transition-timing-function: grape-bezier
				transform: translateX(6px)
				opacity: 1
.message-content
	margin-left: 54px
	.message
		display: inline-block
		clear: both
		font-size: 1.1em
		padding: 10px 16px 9px 14px
		position: relative
		border: solid 1px #E5E5E5
		border-radius: 6px 6px 6px 6px
		background-color: #FFFFFF
		margin-top: 3px
		margin-left: 0px
		margin-right: auto
		box-shadow: 0px 1px 1px 0px rgba(0, 0, 0, 0.05)
		&.freshmessage
			animation: hifromtheleftNoShadow 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94)
		&.first
			margin-top: 0
			border-radius: 0px 6px 6px 6px;
			min-width: 280px
			&:after
				border: none
		&:hover
			> .edit
				opacity: 1
		.edit
			@extend $hoverable
			vertical-align: top
			color: blue-light
			position: absolute
			left: 100%
			top: 9px
			width: 54px
			padding-left: 7px
			opacity: 0
			i
				margin: 0 5px
				&:hover
					color: aqua-darker
				&:active
					color: aqua-light
			.btn-delete
				&:hover
					color: bittersweet-dark
				&:active
					color: darken(bittersweet-dark, 25%)
		.outertime
			position: absolute
			right: 100%
			color: gainsboro-light
			padding-right: 5px
			@extend $small-font-size
			@extend $subtle-link
			visibility: hidden
			text-align: right
			width: 60px
			top: 0
			bottom: 0
			padding-top: 16px
			&.first
				display: none
		&:hover
			.outertime
				visibility: visible
		.status-control
			float: right
			margin-left: 8px
			min-width: 80px
			text-align: right
			.unsent
				color: bittersweet-dark
				.status-label
					color: bittersweet-light
			.resend
				display: none
				color: aqua-dark
				cursor: pointer
			i
				margin-left: 6px
				pointer-events: none
			.status-label
				font-weight: bold
				pointer-events: none
		&.pending
		&.unsent
			.text
				color: #b7bcbf
				overflow: hidden
		&.unsent
			.status-control
				&:hover
					.resend
						display: block
					.unsent
						display: none
		&.editing
			background: lighten(gold, 80%) !important
			color: #666666 !important
			border-color: #DDDDDD !important
			.message-author
				color: #808080 !important
		&.requested
			background-color: rgba(201, 255, 174, 0.53) !important
			color: grape-typo
			&:after
				top: 0
			.message-author
				color: gainsboro-dark
		&.removing
			background: lighten(gold, 60%)
			color: grape-typo
			z-index: 10
			position: relative
			~ .avatar
				&::after
					border-color: lighten(gold, 80%)
		&.removed
			background: lighten(bittersweet-light, 80%) !important
			color: grape-typo !important
			z-index: 10
			position: relative
		a.attachment
			display: inline		
			border-bottom: 1px solid link-color
			margin: 1px
			padding: 1px 0
			vertical-align: baseline
			&:hover
				color: lighten(link-color, 25%)
				text-decoration: none
				border-color: aqua-dark !important
			&:before
				font-weight: normal
				content: "\f016"
				font-family: FontAwesome
				margin-right: 6px
			&[href$=".pdf"]
				&:before
					content: "\f1c1"
			&[href$=".zip"],
			&[href$=".rar"],
			&[href$=".7z"],
			&[href$=".gzip"]
				&:before
					content: "\f1c6"
			&[href$=".mp3"],
			&[href$=".wav"],
			&[href$=".wma"]
				&:before
					content: "\f1c7"
			&[href$=".xls"],
			&[href$=".xlsx"],
			&[href$=".csv"]
				&:before
					content: "\f1c3"
			&[href$=".doc"],
			&[href$=".docx"],
			&[href$=".rtf"]
				&:before
					content: "\f1c2"
			&[href$=".ppt"],
			&[href$=".pptx"]
				&:before
					content: "\f1c4"
			&[href$=".png"],
			&[href$=".jpg"],
			&[href$=".jpeg"],
			&[href$=".bmp"],
			&[href$=".tif"],
			&[href$=".tiff"]
				&:before
					content: "\f1c5"
			&[href$=".wmv"],
			&[href$=".avi"],
			&[href$=".mpg"],
			&[href$=".mpeg"],
			&[href$=".mov"],
			&[href$=".mp4"]
				&:before
					content: "\f1c8"
		.img-atm
			display: inline-block
		.image-wrap
			display: inline-block
			line-height: 1px
			max-height: 480px
			overflow: hidden
			margin-left: 6px
			&:first-of-type
				margin-left: 0px
			img
				max-width: 100%

.message-group.creator.user
	.message-content
		.message
			background-color: blue-lighter
			border-color: blue-light
	.avatar
		&.editing
			&::after
				border-right-color: lighten(gold, 80%) !important
				border-top-color: lighten(gold, 80%) !important
			&::before // Hack for the arrow of the message box
				border-right-color: #DDDDDD !important
				border-top-color: #DDDDDD !important

//When a user was removed from the organization, #867
span.author-deleted
	@extend $small-font-size
	font-weight: bold
	text-transform: uppercase
	margin-left: 4px

.avatar.removed
	&::after
		border-right-color: lighten(bittersweet-light, 80%) !important
		border-top-color: lighten(bittersweet-light, 80%) !important
	&::before // Hack for the arrow of the message box
		border-top-color: #DDDDDD !important
		border-right-color: #DDDDDD !important



// ****
//
// Sidebar animations
//
// ****

.right-sidebar-show {
    transform: translateX(0px) !important
}

.main-window-minimize {
    -webkit-transition: margin-right 0.5s, -webkit-transform 0.5s
    transition: margin-right 0.5s, transform 0.5s
    transition-timing-function: ease-out
    margin-right: 250px !important
}


// ****
//
// Styling for Typing Notifications #1587
//
// ****

.typing-notification
	@extend $small-font-size
	margin: 5px 30px 5px 66px
	color: gainsboro-dark
	min-height: 11px
	text-align: center
	i.fa
		margin-left: 1px
	.dotOne
		opacity: 0
		-webkit-animation: dot 1.3s infinite
		-webkit-animation-delay: 0.0s
		animation: dot 1.3s infinite
		animation-delay: 0.0s
	.dotTwo
		opacity: 0
		-webkit-animation: dot 1.3s infinite
		-webkit-animation-delay: 0.2s
		animation: dot 1.3s infinite
		animation-delay: 0.2s
	.dotThree
		opacity: 0
		-webkit-animation: dot 1.3s infinite
		-webkit-animation-delay: 0.3s
		animation: dot 1.3s infinite
		animation-delay: 0.3s

@-webkit-keyframes dot {
      0% { opacity: 0; }
     50% { opacity: 0; }
    100% { opacity: 1; }
}

@keyframes dot {
      0% { opacity: 0; }
     50% { opacity: 0; }
    100% { opacity: 1; }
}

// ****
//
// Styling for markdown text within a message
//
// ****

.text
	padding: 0
	margin-bottom: 1px
	max-width: 85%
	word-wrap: break-word
	transition: opacity .2s linear
	em
		font-style: italic
	ul,
	ol
		padding-left: 18px
	ul
		list-style: disc outside none
	ol
		list-style: decimal outside none
	blockquote
		border-left: 3px solid gainsboro-light
		margin: 4px 0
		padding: 0.5em 10px
		font-style: italic
		color: gainsboro-dark
	pre
		overflow: hidden
		color: grape-typo
	code
		border: 1px solid gainsboro-light
		border-radius: main-border-radius
		background: white
		padding: 0 4px
		display: inline-block
		margin-bottom: -1px
		white-space: pre-wrap; /* CSS3 */
		white-space: -moz-pre-wrap; /* Mozilla, post millennium */
		white-space: -pre-wrap; /* Opera 4-6 */
		white-space: -o-pre-wrap; /* Opera 7 */
		word-wrap: break-word; /* Internet Explorer 5.5+ */
		color: grape-typo
	.warning-unsent
		color: gainsboro-light
		&:before
			content: "\f071"
			font-family: FontAwesome
			color: gold
			margin-right: 6px
	p
		margin-bottom: 8px
		&:last-of-type
			margin-bottom: 0
		.markdown-img-wrapper
			text-align: center
			vertical-align: middle
			display: table-cell
			height: 250px
			width: 400px
			border: 1px solid #eeecef
			border-radius: main-border-radius
			img
				max-width: 350px
				max-height: 200px

.googledrive
	.text
		p
			.markdown-img-wrapper
				text-align: inherit
				vertical-align: inherit
				display: inherit
				height: inherit
				width: inherit
				border: inherit
				border-radius: inherit
				img
					max-width: inherit
					max-height: inherit

// ****
//
// Separators, used to split content within the history
//
// ****
.date-separator,
.newmessage-separator
	text-align: center
	color: gainsboro-dark
	position: relative
	height: 30px
	padding: 5px 0 0 0
	margin: 0 30px 20px 20px
	span
		color: grape-dark
		background-color: chat-background
		padding: 7px 16px 6px 16px
		position: relative
		z-index: 5
		border: 1px solid slate
		border-radius: 3px
	&::before
		content: ""
		position: absolute
		top: 50%
		left: 0
		right: 0
		background-color: #d9d9d9
		height: 1px
		margin-top: 1px

.date-separator
	span
		color: slate
	&::before
		content: ""
		position: absolute
		top: 50%
		left: 0
		right: 0
		background-color: #d9d9d9
		height: 1px
		margin-top: 0px

.newmessage-separator
	span
		border-color: grass-light
		color: grass-light

.content-break
	height: 1px
	margin: 5px 0

.load-button
	text-align: center
	a
		padding: 12px 20px
		display: block
		text-transform: uppercase
		font-weight: bold
		i
			transition: all 0.2s cg-animation-speed
		&:hover
			i
				transform: scale(1.3,1.3)

.bigarrow
	@extend $bigger-font-size
	border: 2px solid gainsboro-dark
	background: lighten(gainsboro-light, 20)
	border-radius: 50%
	position: fixed
	bottom: 88px
	right: 20px
	color: gainsboro-dark
	width: 50px
	height: 50px
	text-align: center
	line-height: 50px
	@extend $hoverable
	@extend $subtle-link
	overflow: hidden
	z-index: 99
	i
		transition: all 0.2s cg-animation-speed
	&:hover
		border-color: aqua-dark
		i
			transform: scale(1.3,1.3)

.breakpointmessage
	border-top: 1px solid silver-grey-dark
	box-shadow: 0 1px 2px gainsboro-light inset
	color: gainsboro-dark